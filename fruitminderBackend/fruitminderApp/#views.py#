from django.shortcuts import render

# Create your views here.
from django.shortcuts import render
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from rest_framework import viewsets
from .serializers import TodoSerializer
from .serializers import TreeSerializer
from .models import Todo
from .models import Tree






# Rest api end point
def get_todo_list(request):
    """
    Returns Json list of all todo objects
    """
    if request.method == "GET":
        rest_list = Todo.objects.order_by('-completed')
        serializer = TodoSerializer(rest_list, many=True)
        return JsonResponse(serializer.data, safe=False)

    

def get_tree_list(request):
    """
    Returns Json list of all trees in orchard
    """
    if request.method == "GET":
        rest_list = Tree.objects.order_by('rowNum')
        serializer = TreeSerializer(rest_list, many=True)
        return JsonResponse(serializer.data, safe=False)


# Create your views here.
class TodoView(viewsets.ModelViewSet):
    serializer_class = TodoSerializer
    queryset = Todo.objects.all()

class TreeView(viewsets.ModelViewSet):
    serializer_class = TreeSerializer
    queryset = Tree.objects.all()
